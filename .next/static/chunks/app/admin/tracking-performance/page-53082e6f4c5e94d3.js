(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[625],{1562:(e,s,t)=>{"use strict";t.d(s,{default:()=>n});var a=t(5155),r=t(2115);t(2468);let n=()=>{let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[c,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(""),[o,m]=(0,r.useState)({startDate:"",endDate:""}),[h,u]=(0,r.useState)("all"),v=new Date().toLocaleString("en-US",{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/(\d+)\/(\d+)\/(\d+),?\s*(\d+):(\d+):(\d+)/,"$3-$1-$2 $4:$5:$6");(0,r.useEffect)(()=>{let e=localStorage.getItem("qmsEntries");if(e){let s=JSON.parse(e);i(s),j(s)}},[]),(0,r.useEffect)(()=>{x()},[e,l,o,h]);let j=e=>{let t={};e.forEach(e=>{let s=e.hunterName||"Unassigned";t[s]||(t[s]={name:s,totalEntries:0,completedEntries:0,overdueEntries:0,avgCompletionTime:0,totalDaysSpent:0,successRate:0,recentActivity:[],categories:{},monthlyStats:{}});let a=t[s];a.totalEntries++;let r=new Date,n=e.dueDate?new Date(e.dueDate):null,c=new Date(e.date);if(n){n<r?a.overdueEntries++:a.completedEntries++;let e=Math.abs((n-c)/864e5);a.totalDaysSpent+=e}let i=e.category||"Uncategorized";a.categories[i]=(a.categories[i]||0)+1;let l=c.toISOString().slice(0,7);a.monthlyStats[l]=(a.monthlyStats[l]||0)+1,a.recentActivity.push({id:e.id,portalName:e.portalName,bidNumber:e.bidNumber,date:e.date,status:n&&n<r?"overdue":"active"})}),Object.values(t).forEach(e=>{e.avgCompletionTime=e.totalEntries>0?Math.round(e.totalDaysSpent/e.totalEntries):0,e.successRate=e.totalEntries>0?Math.round((e.totalEntries-e.overdueEntries)/e.totalEntries*100):0,e.recentActivity.sort((e,s)=>new Date(s.date)-new Date(e.date)),e.recentActivity=e.recentActivity.slice(0,5)});let a=Object.values(t);s(a),n(a)},x=()=>{let s=[...e];l&&(s=s.filter(e=>e.name.toLowerCase().includes(l.toLowerCase()))),(o.startDate||o.endDate)&&(s=s.filter(e=>e.recentActivity.some(e=>{let s=new Date(e.date),t=new Date(o.startDate?o.startDate:"1900-01-01"),a=o.endDate?new Date(o.endDate):new Date;return s>=t&&s<=a}))),"all"!==h&&(s=s.sort((e,s)=>{switch(h){case"entries":return s.totalEntries-e.totalEntries;case"success":return s.successRate-e.successRate;case"speed":return e.avgCompletionTime-s.avgCompletionTime;case"overdue":return s.overdueEntries-e.overdueEntries;default:return 0}})),n(s)},p=s=>{let t=.6*s.successRate+s.totalEntries/Math.max(...e.map(e=>e.totalEntries))*40;return t>=85?{rating:"Excellent",class:"excellent",emoji:"\uD83C\uDF1F"}:t>=70?{rating:"Good",class:"good",emoji:"\uD83D\uDC4D"}:t>=50?{rating:"Average",class:"average",emoji:"\uD83D\uDC4C"}:{rating:"Needs Improvement",class:"poor",emoji:"\uD83D\uDCC8"}};return(0,a.jsxs)("div",{className:"performance-tracking-container",children:[(0,a.jsxs)("div",{className:"performance-header",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{children:"Tracking Performance"}),(0,a.jsx)("p",{children:"Monitor and analyze team member performance across QMS entries"})]}),(0,a.jsxs)("div",{style:{textAlign:"right",fontSize:"0.9rem",opacity:.9,background:"rgba(255, 255, 255, 0.1)",padding:"10px 15px",borderRadius:"10px",backdropFilter:"blur(10px)"},children:[(0,a.jsxs)("div",{children:["Current User: ",(0,a.jsx)("strong",{children:"MFakheem"})]}),(0,a.jsxs)("div",{children:["Date: ",(0,a.jsxs)("strong",{children:[v," UTC"]})]})]})]}),(0,a.jsxs)("div",{className:"performance-summary",children:[(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-icon",children:"\uD83D\uDC65"}),(0,a.jsxs)("div",{className:"summary-content",children:[(0,a.jsx)("h3",{children:"Total Hunters"}),(0,a.jsx)("div",{className:"summary-value",children:e.length})]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-icon",children:"\uD83D\uDCCA"}),(0,a.jsxs)("div",{className:"summary-content",children:[(0,a.jsx)("h3",{children:"Total Entries"}),(0,a.jsx)("div",{className:"summary-value",children:c.length})]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-icon",children:"✅"}),(0,a.jsxs)("div",{className:"summary-content",children:[(0,a.jsx)("h3",{children:"Avg Success Rate"}),(0,a.jsxs)("div",{className:"summary-value",children:[e.length>0?Math.round(e.reduce((e,s)=>e+s.successRate,0)/e.length):0,"%"]})]})]}),(0,a.jsxs)("div",{className:"summary-card",children:[(0,a.jsx)("div",{className:"summary-icon",children:"⚠️"}),(0,a.jsxs)("div",{className:"summary-content",children:[(0,a.jsx)("h3",{children:"Total Overdue"}),(0,a.jsx)("div",{className:"summary-value",children:e.reduce((e,s)=>e+s.overdueEntries,0)})]})]})]}),(0,a.jsxs)("div",{className:"performance-controls",children:[(0,a.jsxs)("div",{className:"search-filter-section",children:[(0,a.jsxs)("div",{className:"search-container",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search hunters...",value:l,onChange:e=>d(e.target.value),className:"search-input"}),(0,a.jsx)("span",{className:"search-icon",children:"\uD83D\uDD0D"})]}),(0,a.jsxs)("div",{className:"date-range-container",children:[(0,a.jsx)("input",{type:"date",value:o.startDate,onChange:e=>m(s=>({...s,startDate:e.target.value})),className:"form-input",placeholder:"Start Date"}),(0,a.jsx)("input",{type:"date",value:o.endDate,onChange:e=>m(s=>({...s,endDate:e.target.value})),className:"form-input",placeholder:"End Date"})]}),(0,a.jsx)("div",{className:"filter-container",children:(0,a.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"filter-select",children:[(0,a.jsx)("option",{value:"all",children:"All Metrics"}),(0,a.jsx)("option",{value:"entries",children:"Most Entries"}),(0,a.jsx)("option",{value:"success",children:"Highest Success Rate"}),(0,a.jsx)("option",{value:"speed",children:"Fastest Completion"}),(0,a.jsx)("option",{value:"overdue",children:"Most Overdue"})]})})]}),(0,a.jsxs)("div",{className:"performance-actions",children:[(0,a.jsx)("button",{className:"btn-primary",onClick:()=>{let e=new Blob([[["Hunter Name","Total Entries","Success Rate %","Overdue Entries","Avg Completion Days","Performance Rating"],...t.map(e=>[e.name,e.totalEntries,e.successRate,e.overdueEntries,e.avgCompletionTime,p(e).rating])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download="performance_report_".concat(new Date().toISOString().slice(0,10),".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},children:"\uD83D\uDCCA Export Report"}),(0,a.jsx)("button",{className:"btn-secondary",onClick:()=>j(c),children:"\uD83D\uDD04 Refresh Data"})]})]}),(0,a.jsx)("div",{className:"performance-list-container",children:(0,a.jsxs)("table",{className:"performance-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Hunter"}),(0,a.jsx)("th",{children:"Total Entries"}),(0,a.jsx)("th",{children:"Success Rate"}),(0,a.jsx)("th",{children:"Overdue"}),(0,a.jsx)("th",{children:"Avg Days"}),(0,a.jsx)("th",{children:"Performance"}),(0,a.jsx)("th",{children:"Top Categories"}),(0,a.jsx)("th",{children:"Recent Activity"})]})}),(0,a.jsx)("tbody",{children:0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,children:(0,a.jsxs)("div",{className:"no-data-message",children:[(0,a.jsx)("div",{className:"no-data-icon",children:"\uD83D\uDCCA"}),(0,a.jsx)("h3",{children:"No Performance Data"}),(0,a.jsx)("p",{children:"No hunter performance data available."})]})})}):t.map((e,s)=>{let t=p(e),r=Object.entries(e.categories).sort((e,s)=>{let[,t]=e,[,a]=s;return a-t}).slice(0,2);return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"hunter-info",children:[(0,a.jsx)("div",{className:"hunter-avatar",children:e.name.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"hunter-details",children:[(0,a.jsx)("div",{className:"hunter-name",children:e.name}),(0,a.jsxs)("div",{className:"hunter-rank",children:["#",s+1]})]})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"metric-value",children:[(0,a.jsx)("strong",{children:e.totalEntries}),(0,a.jsx)("span",{className:"metric-label",children:"entries"})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"success-rate",children:(0,a.jsx)("div",{className:"progress-circle",style:{background:"conic-gradient(#28a745 ".concat(3.6*e.successRate,"deg, #e9ecef 0deg)")},children:(0,a.jsxs)("span",{children:[e.successRate,"%"]})})})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"overdue-count ".concat(e.overdueEntries>0?"has-overdue":""),children:e.overdueEntries})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"completion-time",children:[(0,a.jsx)("strong",{children:e.avgCompletionTime}),(0,a.jsx)("span",{className:"metric-label",children:"days"})]})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"performance-rating ".concat(t.class),children:[(0,a.jsx)("span",{className:"rating-emoji",children:t.emoji}),(0,a.jsx)("span",{className:"rating-text",children:t.rating})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"categories-list",children:r.map(e=>{let[s,t]=e;return(0,a.jsxs)("span",{className:"category-tag",children:[s," (",t,")"]},s)})})}),(0,a.jsx)("td",{children:(0,a.jsx)("div",{className:"recent-activity",children:e.recentActivity.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"activity-item",children:[(0,a.jsx)("span",{className:"activity-status ".concat(e.status)}),(0,a.jsxs)("span",{className:"activity-text",children:[e.bidNumber," - ",e.portalName]})]},e.id))})})]},e.name)})})]})})]})}},2468:()=>{},8772:(e,s,t)=>{Promise.resolve().then(t.bind(t,1562))}},e=>{e.O(0,[101,441,964,358],()=>e(e.s=8772)),_N_E=e.O()}]);