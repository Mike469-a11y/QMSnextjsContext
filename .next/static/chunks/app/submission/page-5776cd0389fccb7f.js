(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{453:(e,s,a)=>{Promise.resolve().then(a.bind(a,7673))},2239:()=>{},2501:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});class i{async initDB(){return new Promise((e,s)=>{let a=indexedDB.open(this.dbName,this.version);a.onerror=()=>s(a.error),a.onsuccess=()=>{this.db=a.result,e(this.db)},a.onupgradeneeded=e=>{let s=e.target.result;if(!s.objectStoreNames.contains("attachments")){let e=s.createObjectStore("attachments",{keyPath:"id"});e.createIndex("vendorId","vendorId",{unique:!1}),e.createIndex("qmsId","qmsId",{unique:!1})}s.objectStoreNames.contains("sourcingData")||s.createObjectStore("sourcingData",{keyPath:"qmsId"})}})}async saveAttachment(e){return this.db||await this.initDB(),new Promise((s,a)=>{let i=this.db.transaction(["attachments"],"readwrite").objectStore("attachments").put(e);i.onsuccess=()=>s(i.result),i.onerror=()=>a(i.error)})}async getAttachment(e){return this.db||await this.initDB(),new Promise((s,a)=>{let i=this.db.transaction(["attachments"],"readonly").objectStore("attachments").get(e);i.onsuccess=()=>s(i.result),i.onerror=()=>a(i.error)})}async getAttachmentsByVendor(e,s){return this.db||await this.initDB(),new Promise((a,i)=>{let n=this.db.transaction(["attachments"],"readonly").objectStore("attachments").index("vendorId").getAll(e);n.onsuccess=()=>{a(n.result.filter(e=>e.qmsId===s))},n.onerror=()=>i(n.error)})}async deleteAttachment(e){return this.db||await this.initDB(),new Promise((s,a)=>{let i=this.db.transaction(["attachments"],"readwrite").objectStore("attachments").delete(e);i.onsuccess=()=>s(!0),i.onerror=()=>a(i.error)})}async saveSourcingData(e,s){return this.db||await this.initDB(),new Promise((a,i)=>{let n=this.db.transaction(["sourcingData"],"readwrite").objectStore("sourcingData").put({qmsId:e,data:s,lastUpdated:new Date});n.onsuccess=()=>a(n.result),n.onerror=()=>i(n.error)})}async getSourcingData(e){return this.db||await this.initDB(),new Promise((s,a)=>{let i=this.db.transaction(["sourcingData"],"readonly").objectStore("sourcingData").get(e);i.onsuccess=()=>{var e;return s((null==(e=i.result)?void 0:e.data)||null)},i.onerror=()=>a(i.error)})}async compressImage(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1920,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return new Promise(i=>{let n=document.createElement("canvas"),t=n.getContext("2d"),l=new Image;l.onload=()=>{let e=Math.min(s/l.width,s/l.height);n.width=l.width*e,n.height=l.height*e,t.drawImage(l,0,0,n.width,n.height),n.toBlob(i,"image/jpeg",a)},l.src=URL.createObjectURL(e)})}generateAttachmentId(){return"att_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}constructor(){this.dbName="SourcingSystemDB",this.version=1,this.db=null}}let n=new i},5695:(e,s,a)=>{"use strict";var i=a(8999);a.o(i,"usePathname")&&a.d(s,{usePathname:function(){return i.usePathname}}),a.o(i,"useRouter")&&a.d(s,{useRouter:function(){return i.useRouter}})},7673:(e,s,a)=>{"use strict";a.d(s,{default:()=>c});var i=a(5155),n=a(5695),t=a(2115),l=a(2501);a(2239);let c=()=>{let e=(0,n.useRouter)(),{reviewId:s}=useParams(),[a,c]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[d,m]=(0,t.useState)("all"),[u,h]=(0,t.useState)(""),[p,v]=(0,t.useState)(!1),[x,b]=(0,t.useState)(null),[j,N]=(0,t.useState)(0),[g,f]=(0,t.useState)(!1),[D,C]=(0,t.useState)(null),[y,w]=(0,t.useState)(!1),[A,S]=(0,t.useState)({submissionDate:"",assignedPerson:"",vendorCost:0,shippingCost:0,ccCostPercent:0,ccCostAmount:0,totalCost:0,onePercentVendorCost:0,profitPercent:0,profitAmount:0,totalProfitAmount:0,taxAmount:0,submittedWithMargin:0,submittedBy:"",specialRemarks:""}),[I,k]=(0,t.useState)([]),[E,P]=(0,t.useState)(!1),[R,F]=(0,t.useState)(!1),B="2025-08-01 17:50:24",T="Mike469-a11y",q=async e=>{try{let s={...e,archiveId:(()=>{let e=new Date,s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),n=Math.random().toString(36).substr(2,4).toUpperCase();return"ARCH-".concat(s,"-").concat(a,"-").concat(i,"-").concat(n)})(),submittedToArchiveAt:B,submittedToArchiveBy:T,isArchived:!0,finalSubmissionBy:A.submittedBy||T,finalSubmissionAt:B,finalSubmissionRemarks:A.specialRemarks||"",submissionCalculations:{submissionDate:A.submissionDate,assignedPerson:A.assignedPerson,vendorCost:A.vendorCost,shippingCost:A.shippingCost,ccCostPercent:A.ccCostPercent,ccCostAmount:A.ccCostAmount,totalCost:A.totalCost,onePercentVendorCost:A.onePercentVendorCost,profitPercent:A.profitPercent,profitAmount:A.profitAmount,totalProfitAmount:A.totalProfitAmount,taxAmount:A.taxAmount,submittedWithMargin:A.submittedWithMargin},submissionAttachments:I,workflowStages:[{stage:"hunting",completedAt:e.dateCreated||B,completedBy:e.hunterName||"N/A"},{stage:"sourcing",completedAt:e.sourcingCompletedAt||B,completedBy:e.sourcerName||"N/A"},{stage:"approval",completedAt:e.approvedAt||B,completedBy:e.approvedBy||"N/A"},{stage:"submission",completedAt:B,completedBy:T}]},a=localStorage.getItem("submittedDataEntries"),i=a?JSON.parse(a):[];return i.push(s),localStorage.setItem("submittedDataEntries",JSON.stringify(i)),console.log("✅ Entry successfully transferred to Submitted Data archive:",s.archiveId),s.archiveId}catch(e){throw console.error("❌ Error transferring to archive:",e),e}};(0,t.useEffect)(()=>{l.A.initDB().catch(e=>{console.error("Failed to initialize IndexedDB:",e)})},[]),(0,t.useEffect)(()=>{"/submission"===window.location.pathname&&p&&(v(!1),b(null),N(0),f(!1),w(!1))},[window.location.pathname,p]),(0,t.useEffect)(()=>{let e=()=>{!window.location.pathname.includes("/submission/review/")&&"/submission"===window.location.pathname&&p&&J()};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[p]),(0,t.useEffect)(()=>{let e=()=>{var e,s;p&&(null==x||null==(s=x.sourcingData)||null==(e=s.vendors)?void 0:e.length)>1&&(w(!0),f(!1),D&&clearTimeout(D),C(setTimeout(()=>{w(!1),f(!0)},1500)))};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e),D&&clearTimeout(D)}},[p,x,D]),(0,t.useEffect)(()=>{let e=e=>{var s;if(p&&(null==x||null==(s=x.sourcingData)?void 0:s.vendors)){let s=x.sourcingData.vendors.length;"ArrowLeft"===e.key&&j>0?N(e=>e-1):"ArrowRight"===e.key&&j<s-1&&N(e=>e+1)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[p,x,j]),(0,t.useEffect)(()=>{var e,s,a,i;if(x&&(null==(e=x.sourcingData)?void 0:e.vendors)){let e=x.sourcingData.vendors.find(e=>e.isPrimary)||x.sourcingData.vendors[0];if(e){let n=(null==(s=e.pricing)?void 0:s.subtotal)||0,t=(null==(a=e.sourcingInfo)?void 0:a.estimatedShippingCost)||0,l=(null==(i=e.sourcingInfo)?void 0:i.ccCharges)||0;S(s=>{var a;return{...s,submissionDate:new Date().toISOString().split("T")[0],assignedPerson:x.sourcerName||x.hunterName||"",vendorCost:n,shippingCost:t,ccCostPercent:l,taxAmount:(null==(a=e.pricing)?void 0:a.taxAmount)||0,submittedBy:T,profitPercent:10}})}}},[x,T]),(0,t.useEffect)(()=>{let e=parseFloat(A.vendorCost)||0,s=parseFloat(A.shippingCost)||0,a=parseFloat(A.ccCostPercent)||0,i=parseFloat(A.profitPercent)||0,n=parseFloat(A.taxAmount)||0,t=e*a/100,l=e+s+t,c=.01*e,r=e*i/100,o=r+c,d=l+o+n;S(e=>({...e,ccCostAmount:t,totalCost:l,onePercentVendorCost:c,profitAmount:r,totalProfitAmount:o,submittedWithMargin:d}))},[A.vendorCost,A.shippingCost,A.ccCostPercent,A.profitPercent,A.taxAmount]),(0,t.useEffect)(()=>{L(),s&&Q(s)},[s]);let L=()=>{try{let e=localStorage.getItem("submissionEntries");if(e){let s=JSON.parse(e);c(s)}}catch(e){console.error("Error loading submission entries:",e)}finally{o(!1)}},O=e=>{let s=new Date(e.dueDate),a=Math.ceil((s-new Date)/864e5);return e.isStarted?a<0?"expired":a<=2?"urgent":e.submissionStatus:"not_started"},U=(0,t.useMemo)(()=>a.filter(e=>{var s,a,i,n,t;let l=!0;if("all"!==d){let s=O(e);l="not_started"===d?"not_started"===s:"expired"===d?"expired"===s:"urgent"===d?"urgent"===s:e.submissionStatus===d}let c=(null==(s=e.bidTitle)?void 0:s.toLowerCase().includes(u.toLowerCase()))||(null==(a=e.bidNumber)?void 0:a.toLowerCase().includes(u.toLowerCase()))||(null==(i=e.portalName)?void 0:i.toLowerCase().includes(u.toLowerCase()))||(null==(n=e.sourcerName)?void 0:n.toLowerCase().includes(u.toLowerCase()))||(null==(t=e.hunterName)?void 0:t.toLowerCase().includes(u.toLowerCase()));return l&&c}),[a,d,u]),V=(e,s)=>{S(a=>({...a,[e]:s}))},M=async e=>{let s=Array.from(e),a=[];for(let e of s){if(e.size>0xa00000){alert('❌ File "'.concat(e.name,'" is too large. Maximum size is 10MB.'));continue}try{let s={id:"submission_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),name:e.name,type:e.type,size:"".concat((e.size/1024).toFixed(1)," KB"),file:e,uploadedAt:new Date().toISOString(),section:"submission"};await l.A.saveAttachment(s),a.push(s),console.log("✅ File uploaded successfully:",e.name)}catch(s){console.error("❌ Error saving attachment:",s),alert('❌ Error uploading "'.concat(e.name,'": ').concat(s.message))}}a.length>0&&(k(e=>[...e,...a]),alert("✅ Successfully uploaded ".concat(a.length," file(s)")))},_=async e=>{try{await l.A.deleteAttachment(e),k(s=>s.filter(s=>s.id!==e)),alert("\uD83D\uDDD1️ File removed successfully")}catch(e){console.error("Error removing attachment:",e),alert("❌ Error removing file: ".concat(e.message))}},$=async()=>{if(!E)try{P(!0);let e=localStorage.getItem("submissionEntries");if(e){let s=JSON.parse(e),a=s.findIndex(e=>e.id===x.id);-1!==a&&(s[a]={...s[a],submissionStatus:"processing",submissionDetails:A,submissionAttachments:I,lastSaved:B,savedBy:T},localStorage.setItem("submissionEntries",JSON.stringify(s)),c(s),b(s[a]),alert("\uD83D\uDCBE Progress saved successfully!"))}}catch(e){console.error("Error saving progress:",e),alert("❌ Error saving progress. Please try again.")}finally{P(!1)}},W=async()=>{if(!R){if(!A.submittedBy.trim())return void alert('❌ Please enter the "Submitted By" field before submitting.');if(!A.submissionDate)return void alert("❌ Please select a submission date before submitting.");try{F(!0);let e=localStorage.getItem("submissionEntries");if(e){let s=JSON.parse(e),a=s.findIndex(e=>e.id===x.id);if(-1!==a){let e={...s[a],submissionStatus:"submitted",submissionDetails:A,submissionAttachments:I,submittedAt:B,submittedBy:T};s[a]=e,localStorage.setItem("submissionEntries",JSON.stringify(s));try{let a=await q(e);c(s),alert("✅ Submission completed successfully!\n\n\uD83D\uDCC1 Entry archived with ID: ".concat(a,'\n\n\uD83D\uDDC2️ You can now view this entry in the "Submitted Data" section.')),J(),setTimeout(()=>{L()},100)}catch(e){console.error("❌ Error transferring to archive:",e),alert("⚠️ Submission completed but failed to archive.\n\nEntry status updated but not transferred to Submitted Data section."),c(s),J(),setTimeout(()=>{L()},100)}}}}catch(e){console.error("Error submitting:",e),alert("❌ Error submitting. Please try again.")}finally{F(!1)}}},z=async e=>{if(window.confirm("⚠️ Are you sure you want to delete this submission entry?\n\nThis action cannot be undone!"))try{let s=localStorage.getItem("submissionEntries");if(s){let a=JSON.parse(s).filter(s=>s.id!==e);localStorage.setItem("submissionEntries",JSON.stringify(a)),c(a),alert("\uD83D\uDDD1️ Entry deleted successfully!")}}catch(e){console.error("Error deleting entry:",e),alert("❌ Error deleting entry. Please try again.")}},Q=async e=>{try{o(!0);let s=localStorage.getItem("submissionEntries");if(s){let a=JSON.parse(s),i=a.findIndex(s=>s.id===e),n=a[i];n&&(n.isStarted||(n.isStarted=!0,a[i]=n,localStorage.setItem("submissionEntries",JSON.stringify(a)),c(a)),b(n),v(!0),N(0),f(!1),w(!1),n.submissionDetails&&S(n.submissionDetails),n.submissionAttachments?k(n.submissionAttachments):k([]),window.history.pushState({},"","/submission/review/".concat(e)))}}catch(e){console.error("Error loading review data:",e),alert("❌ Error loading review data. Please try again.")}finally{o(!1)}},J=()=>{v(!1),b(null),N(0),f(!1),w(!1),k([]),e.push("/submission"),setTimeout(()=>{L()},50)},G=()=>{N(e=>Math.max(0,e-1))},K=()=>{var e;if(null==x||null==(e=x.sourcingData)?void 0:e.vendors){let e=x.sourcingData.vendors.length-1;N(s=>Math.min(e,s+1))}},Y=async(e,s)=>{try{console.log("\uD83D\uDCE5 Downloading attachment:",e);let a="",i=e.name||"".concat(s,"_attachment");if("string"==typeof e){let s=await l.A.getAttachment(e);if(s&&s.file)a=URL.createObjectURL(s.file),i=s.name||i;else throw Error("File not found in IndexedDB")}else if(e.file&&e.file instanceof File)a=URL.createObjectURL(e.file),i=e.file.name||i;else if(e.file)a=URL.createObjectURL(e.file),i=e.name||i;else if(e.data){let s,i=e.type||"application/octet-stream";if("string"==typeof e.data)try{let a=e.data.includes(",")?e.data.split(",")[1]:e.data;s=Uint8Array.from(atob(a),e=>e.charCodeAt(0))}catch(a){s=e.data,i="text/plain"}else s=e.data;let n=new Blob([s],{type:i});a=URL.createObjectURL(n)}else if(e.url)a=e.url;else throw Error("No valid file data found");let n=document.createElement("a");n.href=a,n.download=i,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),a.startsWith("blob:")&&setTimeout(()=>URL.revokeObjectURL(a),1e3),alert("\uD83D\uDCE5 Downloaded: ".concat(i))}catch(s){console.error("❌ Error downloading file:",s),alert("❌ Error downloading file: ".concat(e.name||"Unknown","\n\nError: ").concat(s.message))}},X=async(e,s)=>{try{let a="",i=e.name||"".concat(s,"_attachment");if("string"==typeof e){let s=await l.A.getAttachment(e);if(s&&s.file)a=URL.createObjectURL(s.file),i=s.name||i;else throw Error("File not found in IndexedDB")}else if(e.file&&e.file instanceof File)a=URL.createObjectURL(e.file),i=e.file.name||i;else if(e.file)a=URL.createObjectURL(e.file),i=e.name||i;else if(e.data){let s,i=e.type||"application/pdf";if("string"==typeof e.data)try{let a=e.data.includes(",")?e.data.split(",")[1]:e.data;s=Uint8Array.from(atob(a),e=>e.charCodeAt(0))}catch(a){s=e.data,i="text/plain"}else s=e.data;let n=new Blob([s],{type:i});a=URL.createObjectURL(n)}else if(e.url)a=e.url;else throw Error("No valid file data found");let n=window.open(a,"_blank","width=1000,height=800,scrollbars=yes,resizable=yes");n?n.document.title="Preview: ".concat(i):alert("❌ Preview blocked by browser popup blocker.\n\nPlease allow popups for this site and try again."),a.startsWith("blob:")&&setTimeout(()=>URL.revokeObjectURL(a),6e4)}catch(s){console.error("❌ Error previewing file:",s),alert("❌ Error previewing file: ".concat(e.name||"Unknown","\n\nError: ").concat(s.message))}},H=async(e,s)=>{var a,i;if(!(null==(a=e.sourcingInfo)?void 0:a.attachments)||0===e.sourcingInfo.attachments.length)return void alert("\uD83D\uDCED No attachments found for this vendor.");let n=(null==(i=e.sourcingInfo)?void 0:i.vendorName)||"Vendor_".concat(s+1);try{for(let s=0;s<e.sourcingInfo.attachments.length;s++){let a=e.sourcingInfo.attachments[s];setTimeout(async()=>{await Y(a,n)},1e3*s)}alert("\uD83D\uDCE5 Downloading ".concat(e.sourcingInfo.attachments.length," files from ").concat(n,"..."))}catch(e){console.error("❌ Error downloading all files:",e),alert("❌ Error downloading files from ".concat(n,": ").concat(e.message))}};if(r)return(0,i.jsx)("div",{className:"submission-container",children:(0,i.jsxs)("div",{className:"loading-container",children:[(0,i.jsx)("div",{className:"loading-spinner"}),(0,i.jsx)("p",{children:"Loading submission entries..."})]})});if(p&&x){var Z,ee,es,ea,ei,en,et,el,ec,er,eo,ed,em,eu,eh,ep,ev,ex,eb,ej,eN,eg,ef,eD,eC,ey,ew,eA,eS,eI,ek,eE,eP,eR,eF,eB,eT,eq,eL,eO,eU,eV,eM,e_,e$,eW,ez,eQ,eJ;let e=(null==(Z=x.sourcingData)?void 0:Z.vendors)||[],s=e[j],a=e.length;return(0,i.jsxs)("div",{className:"submission-container",children:[g&&a>1&&!y&&(0,i.jsxs)("div",{className:"floating-vendor-nav",children:[(0,i.jsx)("button",{className:"floating-nav-btn floating-prev",onClick:G,disabled:0===j,title:"Previous Vendor",children:"← Prev"}),(0,i.jsxs)("div",{className:"floating-nav-info",children:[j+1," of ",a]}),(0,i.jsx)("button",{className:"floating-nav-btn floating-next",onClick:K,disabled:j===a-1,title:"Next Vendor",children:"Next →"})]}),(0,i.jsxs)("div",{className:"review-page-header",children:[(0,i.jsxs)("div",{className:"header-left",children:[(0,i.jsxs)("h1",{children:["\uD83D\uDCCB Sourcing Review - ",x.id]}),(0,i.jsx)("p",{children:"Complete sourcing details and vendor comparison"})]}),(0,i.jsx)("div",{className:"header-right",children:(0,i.jsxs)("div",{className:"user-info",children:[(0,i.jsxs)("span",{children:["Current User: ",(0,i.jsx)("strong",{children:T})]}),(0,i.jsx)("span",{className:"current-time",children:B})]})})]}),(0,i.jsxs)("div",{className:"review-page-content",children:[("approval_approved"===x.status||"approval_rejected"===x.status)&&(0,i.jsxs)("div",{className:"review-status-display",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("div",{className:"section-icon",children:"\uD83D\uDCCB"}),(0,i.jsx)("h3",{children:"Approval Status"})]}),(0,i.jsxs)("div",{className:"status-display ".concat(x.status),children:[(0,i.jsx)("span",{className:"status-badge ".concat("approval_approved"===x.status?"status-approved":"status-rejected"),children:"approval_approved"===x.status?"✅ Approved":"❌ Rejected"}),(0,i.jsxs)("div",{className:"status-details",children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Date:"})," ",x.approvedAt||x.rejectedAt||"N/A"]}),"approval_approved"===x.status&&x.approvalRemarks&&(0,i.jsxs)("div",{className:"approval-remarks-display",children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Approval Remarks:"})}),(0,i.jsx)("div",{className:"approval-remarks-text",children:x.approvalRemarks})]}),x.rejectionReason&&(0,i.jsxs)("div",{className:"rejection-reason-display",children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Rejection Reason:"})}),(0,i.jsx)("div",{className:"rejection-reason-text",children:x.rejectionReason})]})]})]})]}),(0,i.jsxs)("div",{className:"review-section qms-section-compact",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("div",{className:"section-icon",children:"\uD83D\uDCCB"}),(0,i.jsx)("h3",{children:"Original QMS Information"})]}),(0,i.jsxs)("div",{className:"qms-compact-grid",children:[(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Entry ID:"}),(0,i.jsx)("span",{className:"qms-value",children:x.id})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Sourcer:"}),(0,i.jsx)("span",{className:"qms-value",children:x.sourcerName||x.hunterName||"Not Assigned"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Bid Title:"}),(0,i.jsx)("span",{className:"qms-value",children:x.bidTitle||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Portal:"}),(0,i.jsx)("span",{className:"qms-value",children:x.portalName||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Bid Number:"}),(0,i.jsx)("span",{className:"qms-value",children:x.bidNumber||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Category:"}),(0,i.jsx)("span",{className:"qms-value",children:x.category||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Quantity:"}),(0,i.jsx)("span",{className:"qms-value",children:x.quantity||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Due Date:"}),(0,i.jsx)("span",{className:"qms-value",children:x.dueDate||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Created:"}),(0,i.jsx)("span",{className:"qms-value",children:x.dateCreated||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Assigned By:"}),(0,i.jsx)("span",{className:"qms-value",children:x.assignedBy||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Contact:"}),(0,i.jsx)("span",{className:"qms-value",children:x.contactName||"N/A"})]}),(0,i.jsxs)("div",{className:"qms-compact-item",children:[(0,i.jsx)("span",{className:"qms-label",children:"Email:"}),(0,i.jsx)("span",{className:"qms-value",children:x.email||"N/A"})]}),(x.sourcingRemarks||x.huntingRemarks)&&(0,i.jsxs)("div",{className:"qms-compact-item qms-full-width",children:[(0,i.jsx)("span",{className:"qms-label",children:"Remarks:"}),(0,i.jsx)("span",{className:"qms-value",children:x.sourcingRemarks||x.huntingRemarks})]})]})]}),e.length>0&&(0,i.jsxs)("div",{className:"review-section vendor-carousel-section",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("div",{className:"section-icon",children:"\uD83C\uDFE2"}),(0,i.jsxs)("h3",{children:["Vendor Details (",a," Vendor",a>1?"s":"",")"]})]}),(0,i.jsxs)("div",{className:"vendor-carousel-container",children:[(0,i.jsxs)("div",{className:"carousel-header",children:[(0,i.jsx)("button",{className:"carousel-nav-btn carousel-prev",onClick:G,disabled:0===j,title:"Previous Vendor (← Arrow Key)",children:"← Previous"}),(0,i.jsxs)("div",{className:"carousel-title",children:[(0,i.jsxs)("h4",{children:["Vendor ",j+1," of ",a,(null==s?void 0:s.isPrimary)&&(0,i.jsx)("span",{className:"primary-badge",children:"⭐ PRIMARY"})]}),(0,i.jsx)("div",{className:"vendor-name-display",children:(null==s||null==(ee=s.sourcingInfo)?void 0:ee.vendorName)||(null==s?void 0:s.vendorName)||"Unknown Vendor"})]}),(0,i.jsx)("button",{className:"carousel-nav-btn carousel-next",onClick:K,disabled:j===a-1,title:"Next Vendor (→ Arrow Key)",children:"Next →"})]}),(0,i.jsx)("div",{className:"carousel-indicators",children:e.map((e,s)=>(0,i.jsx)("button",{className:"carousel-indicator ".concat(s===j?"active":""),onClick:()=>{N(s)},title:"Go to Vendor ".concat(s+1),children:s===j?"●":"○"},s))}),s&&(0,i.jsxs)("div",{className:"carousel-vendor-content",children:[(0,i.jsxs)("div",{className:"sourcing-info-card",children:[(0,i.jsx)("h5",{children:"\uD83D\uDCCB Sourcing Information"}),(0,i.jsxs)("div",{className:"sourcing-fields-list",children:[(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Vendor Name:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(es=s.sourcingInfo)?void 0:es.vendorName)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Quoted Cost:"}),(0,i.jsxs)("span",{className:"field-value-compact cost-value",children:["$",(null==(ea=s.sourcingInfo)?void 0:ea.productServiceQuotedCost)||"0.00"]})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Website:"}),(0,i.jsx)("span",{className:"field-value-compact website-link",children:(null==(ei=s.sourcingInfo)?void 0:ei.vendorWebsite)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact full-width-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Vendor Address:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(en=s.sourcingInfo)?void 0:en.vendorAddress)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Proper Quotation:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(et=s.sourcingInfo)?void 0:et.properQuotationGiven)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Proper Quotation (Vendor):"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(el=s.sourcingInfo)?void 0:el.properQuotationGivenNew)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Risk Assessment:"}),(0,i.jsx)("span",{className:"field-value-compact risk-indicator risk-".concat(null==(eo=s.sourcingInfo)||null==(er=eo.riskAssessment)||null==(ec=er.toLowerCase())?void 0:ec.replace(" ","-")),children:(null==(ed=s.sourcingInfo)?void 0:ed.riskAssessment)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Compliance:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(em=s.sourcingInfo)?void 0:em.compliance)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"CC Accepted:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eu=s.sourcingInfo)?void 0:eu.ccAccepted)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"NET Terms:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eh=s.sourcingInfo)?void 0:eh.netTermsAvailable)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"CC Charges:"}),(0,i.jsxs)("span",{className:"field-value-compact",children:[(null==(ep=s.sourcingInfo)?void 0:ep.ccCharges)||"N/A","%"]})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Specs Sheet Taken:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(ev=s.sourcingInfo)?void 0:ev.specsSheetTaken)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Lead Time:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(ex=s.sourcingInfo)?void 0:ex.leadTimeOffered)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Stock Available:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eb=s.sourcingInfo)?void 0:eb.stockAvailable)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Quote Receiving Date:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(ej=s.sourcingInfo)?void 0:ej.quoteReceivingDate)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Quote Valid Till:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eN=s.sourcingInfo)?void 0:eN.quoteValidTill)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Remaining Days:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eg=s.sourcingInfo)?void 0:eg.remainingDays)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Item Same/Alternative:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(ef=s.sourcingInfo)?void 0:ef.itemSameAlternative)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Warranty:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eD=s.sourcingInfo)?void 0:eD.warrantyPeriod)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"After Sales Support:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eC=s.sourcingInfo)?void 0:eC.afterSalesSupport)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Support Period:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(ey=s.sourcingInfo)?void 0:ey.supportPeriod)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact full-width-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Warranty/Support Terms:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(ew=s.sourcingInfo)?void 0:ew.warrantySupportTerms)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Shipping Cost:"}),(0,i.jsxs)("span",{className:"field-value-compact cost-value",children:["$",(null==(eA=s.sourcingInfo)?void 0:eA.estimatedShippingCost)||"0.00"]})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Applicable Taxes:"}),(0,i.jsx)("span",{className:"field-value-compact",children:(null==(eS=s.sourcingInfo)?void 0:eS.applicableTaxes)||"N/A"})]}),(0,i.jsxs)("div",{className:"sourcing-field-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"Restocking Fees:"}),(0,i.jsxs)("span",{className:"field-value-compact",children:[(null==(eI=s.sourcingInfo)?void 0:eI.restockingFees)||"N/A",(null==(ek=s.sourcingInfo)?void 0:ek.restockingFees)==="Yes"&&(null==(eE=s.sourcingInfo)?void 0:eE.restockingFeesPercentage)&&" (".concat(s.sourcingInfo.restockingFeesPercentage,"%)")]})]})]})]}),(0,i.jsxs)("div",{className:"pricing-card",children:[(0,i.jsx)("h5",{children:"\uD83D\uDCB0 Pricing & Line Items"}),(null==(eP=s.pricing)?void 0:eP.lineItems)&&s.pricing.lineItems.length>0&&(0,i.jsxs)("div",{className:"line-items-compact",children:[(0,i.jsx)("h6",{children:"Line Items"}),(0,i.jsx)("div",{className:"line-items-list",children:s.pricing.lineItems.map((e,s)=>(0,i.jsxs)("div",{className:"line-item-row",children:[(0,i.jsx)("div",{className:"line-item-desc",children:e.description||"N/A"}),(0,i.jsxs)("div",{className:"line-item-details",children:["Qty: ",e.qty||"0"," | Unit: $",e.unitPrice||"0.00"," | Total: $",(e.cost||0).toFixed(2)]})]},e.id||s))})]}),(0,i.jsxs)("div",{className:"cost-breakdown-compact",children:[(0,i.jsx)("h6",{children:"Cost Breakdown"}),(0,i.jsxs)("div",{className:"breakdown-list",children:[(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Total:"}),(0,i.jsxs)("span",{children:["$",((null==(eR=s.pricing)?void 0:eR.subtotal)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"CC Charges:"}),(0,i.jsxs)("span",{children:["$",((null==(eF=s.pricing)?void 0:eF.ccChargesAmount)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Tax:"}),(0,i.jsxs)("span",{children:["$",((null==(eB=s.pricing)?void 0:eB.taxAmount)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Freight:"}),(0,i.jsxs)("span",{children:["$",((null==(eT=s.pricing)?void 0:eT.freightLogistics)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Extended Warranty:"}),(0,i.jsxs)("span",{children:["$",((null==(eq=s.pricing)?void 0:eq.extendedWarranty)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Installation:"}),(0,i.jsxs)("span",{children:["$",((null==(eL=s.pricing)?void 0:eL.installation)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Restocking Fees:"}),(0,i.jsxs)("span",{children:["$",((null==(eO=s.pricing)?void 0:eO.restockingFeesAmount)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Other 1:"}),(0,i.jsxs)("span",{children:["$",((null==(eU=s.pricing)?void 0:eU.other1)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Other 2:"}),(0,i.jsxs)("span",{children:["$",((null==(eV=s.pricing)?void 0:eV.other2)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact grand-total-compact",children:[(0,i.jsx)("span",{children:"Grand Total:"}),(0,i.jsxs)("span",{children:["$",((null==(eM=s.pricing)?void 0:eM.grandTotal)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Discount 1:"}),(0,i.jsxs)("span",{children:["-$",((null==(e_=s.pricing)?void 0:e_.discount1)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact",children:[(0,i.jsx)("span",{children:"Discount 2:"}),(0,i.jsxs)("span",{children:["-$",((null==(e$=s.pricing)?void 0:e$.discount2)||0).toFixed(2)]})]}),(0,i.jsxs)("div",{className:"breakdown-item-compact final-total-compact",children:[(0,i.jsx)("span",{children:"Final Total:"}),(0,i.jsxs)("span",{children:["$",((null==(eW=s.pricing)?void 0:eW.finalGrandTotal)||0).toFixed(2)]})]})]})]})]}),(null==(ez=s.sourcingInfo)?void 0:ez.remarks)&&(0,i.jsxs)("div",{className:"sourcing-info-card",style:{marginTop:"20px"},children:[(0,i.jsx)("h5",{children:"\uD83D\uDCDD Vendor Remarks/Notes"}),(0,i.jsx)("div",{className:"sourcing-fields-list",children:(0,i.jsxs)("div",{className:"sourcing-field-compact full-width-compact",children:[(0,i.jsx)("span",{className:"field-label-compact",children:"\uD83C\uDD95 Remarks / Notes:"}),(0,i.jsx)("span",{className:"field-value-compact",children:s.sourcingInfo.remarks})]})})]})]})]})]}),e.length>0&&(null==s||null==(eQ=s.sourcingInfo)?void 0:eQ.attachments)&&s.sourcingInfo.attachments.length>0&&(0,i.jsxs)("div",{className:"review-section",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("div",{className:"section-icon",children:"\uD83D\uDCCE"}),(0,i.jsxs)("h3",{children:["Vendor Attachments - ",(null==(eJ=s.sourcingInfo)?void 0:eJ.vendorName)||"Vendor ".concat(j+1)]})]}),(0,i.jsxs)("div",{className:"attachments-card",children:[(0,i.jsxs)("div",{className:"attachments-header",children:[(0,i.jsxs)("h6",{children:["\uD83D\uDCCE Attachments (",s.sourcingInfo.attachments.length,")"]}),(0,i.jsx)("button",{className:"btn-download-all",onClick:()=>H(s,j),title:"Download all files",children:"\uD83D\uDCE5 Download All"})]}),(0,i.jsx)("div",{className:"attachments-list-compact",children:s.sourcingInfo.attachments.map((e,a)=>{var n,t,l,c,r,o,d,m;return(0,i.jsxs)("div",{className:"attachment-item-compact",children:[(0,i.jsxs)("div",{className:"attachment-info-compact",children:[(0,i.jsxs)("div",{className:"attachment-name-compact",children:[e.name||(null==(n=e.file)?void 0:n.name)||"File ".concat(a+1),(e.type||(null==(t=e.file)?void 0:t.type))&&(0,i.jsxs)("span",{className:"file-type-indicator",children:["(",null==(l=(e.type||(null==(c=e.file)?void 0:c.type)).split("/")[1])?void 0:l.toUpperCase(),")"]})]}),(0,i.jsxs)("div",{className:"attachment-details-compact",children:[(0,i.jsx)("span",{className:"attachment-size-compact",children:e.size||(null==(r=e.file)?void 0:r.size)||"Unknown size"}),(0,i.jsx)("span",{className:"attachment-type-compact",children:e.type||(null==(o=e.file)?void 0:o.type)||"Unknown type"})]})]}),(0,i.jsxs)("div",{className:"attachment-actions-compact",children:[(0,i.jsx)("button",{className:"btn-preview-file",onClick:()=>{var a;return X(e,(null==(a=s.sourcingInfo)?void 0:a.vendorName)||"Vendor ".concat(j+1))},title:"Preview ".concat(e.name||(null==(d=e.file)?void 0:d.name)||"file"),children:"\uD83D\uDC41️"}),(0,i.jsx)("button",{className:"btn-download-file",onClick:()=>{var a;return Y(e,(null==(a=s.sourcingInfo)?void 0:a.vendorName)||"Vendor ".concat(j+1))},title:"Download ".concat(e.name||(null==(m=e.file)?void 0:m.name)||"file"),children:"\uD83D\uDCE5"})]})]},a)})})]})]}),(0,i.jsxs)("div",{className:"review-section submission-details-section",children:[(0,i.jsxs)("div",{className:"section-header",children:[(0,i.jsx)("div",{className:"section-icon",children:"\uD83D\uDCCA"}),(0,i.jsx)("h3",{children:"Submission Details & Calculations"})]}),(0,i.jsxs)("div",{className:"submission-details-form",children:[(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCC5 Submission Date"}),(0,i.jsx)("input",{type:"date",value:A.submissionDate,onChange:e=>V("submissionDate",e.target.value),className:"submission-input"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDC64 Assigned Person"}),(0,i.jsx)("input",{type:"text",value:A.assignedPerson,onChange:e=>V("assignedPerson",e.target.value),className:"submission-input",placeholder:"Enter assigned person name"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCB0 Vendor Cost (Line Items Total)"}),(0,i.jsx)("input",{type:"number",value:A.vendorCost,onChange:e=>V("vendorCost",e.target.value),className:"submission-input auto-calculated",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-fetched from sourcing data"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDE9A Shipping Cost"}),(0,i.jsx)("input",{type:"number",value:A.shippingCost,onChange:e=>V("shippingCost",e.target.value),className:"submission-input",step:"0.01",placeholder:"0.00"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCB3 Credit Card Cost (%)"}),(0,i.jsx)("input",{type:"number",value:A.ccCostPercent,onChange:e=>V("ccCostPercent",e.target.value),className:"submission-input",step:"0.01",placeholder:"0.00"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCB3 Credit Card Cost (Amount)"}),(0,i.jsx)("input",{type:"number",value:A.ccCostAmount.toFixed(2),readOnly:!0,className:"submission-input auto-calculated",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-calculated: Vendor Cost \xd7 CC %"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCB5 TOTAL COST"}),(0,i.jsx)("input",{type:"number",value:A.totalCost.toFixed(2),readOnly:!0,className:"submission-input auto-calculated total-field",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-calculated: Vendor Cost + Shipping + CC Amount"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCCA 1% of Vendor Cost"}),(0,i.jsx)("input",{type:"number",value:A.onePercentVendorCost.toFixed(2),readOnly:!0,className:"submission-input auto-calculated",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-calculated: Vendor Cost \xd7 1%"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCC8 PROFIT %"}),(0,i.jsx)("input",{type:"number",value:A.profitPercent,onChange:e=>V("profitPercent",e.target.value),className:"submission-input",step:"0.01",placeholder:"10.00"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCB2 PROFIT $"}),(0,i.jsx)("input",{type:"number",value:A.profitAmount.toFixed(2),readOnly:!0,className:"submission-input auto-calculated",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-calculated: Vendor Cost \xd7 Profit %"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDC8E Total Profit Amount"}),(0,i.jsx)("input",{type:"number",value:A.totalProfitAmount.toFixed(2),readOnly:!0,className:"submission-input auto-calculated total-field",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-calculated: PROFIT $ + 1% of Vendor Cost"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83C\uDFDB️ TAX Amount"}),(0,i.jsx)("input",{type:"number",value:A.taxAmount,onChange:e=>V("taxAmount",e.target.value),className:"submission-input",step:"0.01",placeholder:"0.00"})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83C\uDFAF Submitted with Margin"}),(0,i.jsx)("input",{type:"number",value:A.submittedWithMargin.toFixed(2),readOnly:!0,className:"submission-input auto-calculated final-total",step:"0.01"}),(0,i.jsx)("span",{className:"field-note",children:"Auto-calculated: Total Cost + Total Profit + TAX"})]}),(0,i.jsxs)("div",{className:"submission-field full-width",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCCE Attachments"}),(0,i.jsxs)("div",{className:"submission-attachments-card",children:[(0,i.jsxs)("div",{className:"submission-upload-area",onDrop:e=>{e.preventDefault(),M(e.dataTransfer.files)},onDragOver:e=>e.preventDefault(),onClick:()=>document.getElementById("submission-file-input").click(),children:[(0,i.jsx)("div",{className:"submission-upload-icon",children:"\uD83D\uDCCE"}),(0,i.jsx)("div",{className:"submission-upload-text",children:"Drag & drop files here or click to browse"}),(0,i.jsx)("div",{className:"submission-upload-note",children:"Supported: PDF, Excel, Word, Images (max 10MB each)"}),(0,i.jsx)("button",{type:"button",className:"submission-browse-btn",children:"Browse Files"})]}),(0,i.jsx)("input",{id:"submission-file-input",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.gif",onChange:e=>M(e.target.files),style:{display:"none"}}),I.length>0&&(0,i.jsxs)("div",{className:"submission-uploaded-files",children:[(0,i.jsxs)("h6",{children:["Uploaded Files (",I.length,"):"]}),(0,i.jsx)("div",{className:"submission-file-list",children:I.map((e,s)=>{var a,n;return(0,i.jsxs)("div",{className:"submission-file-item",children:[(0,i.jsxs)("div",{className:"submission-file-info",children:[(0,i.jsxs)("div",{className:"submission-file-name",children:["\uD83D\uDCC4 ",e.name,(0,i.jsxs)("span",{className:"submission-file-type",children:["(",null==(n=e.type)||null==(a=n.split("/")[1])?void 0:a.toUpperCase(),")"]})]}),(0,i.jsx)("div",{className:"submission-file-size",children:e.size})]}),(0,i.jsxs)("div",{className:"submission-file-actions",children:[(0,i.jsx)("button",{type:"button",className:"submission-btn-preview",onClick:()=>X(e,"Submission"),title:"Preview ".concat(e.name),children:"\uD83D\uDC41️"}),(0,i.jsx)("button",{type:"button",className:"submission-btn-download",onClick:()=>Y(e,"Submission"),title:"Download ".concat(e.name),children:"\uD83D\uDCE5"}),(0,i.jsx)("button",{type:"button",className:"submission-btn-remove",onClick:()=>_(e.id),title:"Remove ".concat(e.name),children:"\uD83D\uDDD1️"})]})]},e.id||s)})})]})]})]}),(0,i.jsxs)("div",{className:"submission-field",children:[(0,i.jsx)("label",{className:"submission-label",children:"✍️ Submitted By"}),(0,i.jsx)("input",{type:"text",value:A.submittedBy,onChange:e=>V("submittedBy",e.target.value),className:"submission-input",placeholder:"Enter submitter name"})]}),(0,i.jsxs)("div",{className:"submission-field full-width",children:[(0,i.jsx)("label",{className:"submission-label",children:"\uD83D\uDCDD SPECIAL SUBMISSION REMARKS"}),(0,i.jsx)("textarea",{value:A.specialRemarks,onChange:e=>V("specialRemarks",e.target.value),className:"submission-textarea",placeholder:"Enter any special remarks or notes for this submission...",rows:"4"})]})]}),(0,i.jsxs)("div",{className:"submission-action-buttons",children:[(0,i.jsx)("button",{className:"btn-save-progress",onClick:$,disabled:E,children:E?"\uD83D\uDCBE Saving...":"\uD83D\uDCBE Save Progress"}),(0,i.jsx)("button",{className:"btn-submit-final",onClick:W,disabled:R,children:R?"\uD83D\uDCE4 Submitting...":"\uD83D\uDCE4 Submit"})]})]})]}),(0,i.jsx)("div",{className:"review-page-navigation",children:(0,i.jsx)("button",{className:"btn-back-to-approval",onClick:J,children:"← Back to Submission Dashboard"})})]})}return(0,i.jsxs)("div",{className:"submission-container",children:[(0,i.jsxs)("div",{className:"submission-header",children:[(0,i.jsxs)("div",{className:"header-left",children:[(0,i.jsx)("h1",{children:"\uD83D\uDCE4 Submission Dashboard"}),(0,i.jsx)("p",{children:"Manage final submissions and documentation processes"})]}),(0,i.jsx)("div",{className:"header-right",children:(0,i.jsxs)("div",{className:"user-info",children:[(0,i.jsxs)("span",{children:["Current User: ",(0,i.jsx)("strong",{children:T})]}),(0,i.jsx)("span",{className:"current-time",children:B})]})})]}),(0,i.jsxs)("div",{className:"approval-filters",children:[(0,i.jsxs)("div",{className:"filter-group",children:[(0,i.jsx)("label",{children:"Filter by Status:"}),(0,i.jsxs)("select",{value:d,onChange:e=>m(e.target.value),className:"filter-select",children:[(0,i.jsx)("option",{value:"all",children:"All Statuses"}),(0,i.jsx)("option",{value:"pending_submission",children:"Pending Submission"}),(0,i.jsx)("option",{value:"processing",children:"Processing"}),(0,i.jsx)("option",{value:"submitted",children:"Submitted"}),(0,i.jsx)("option",{value:"not_started",children:"Not Started"}),(0,i.jsx)("option",{value:"expired",children:"Expired"}),(0,i.jsx)("option",{value:"urgent",children:"Urgent"})]})]}),(0,i.jsxs)("div",{className:"search-group",children:[(0,i.jsx)("label",{children:"Search:"}),(0,i.jsx)("input",{type:"text",placeholder:"Search by bid title, number, portal, or sourcer...",value:u,onChange:e=>h(e.target.value),className:"search-input"})]}),(0,i.jsx)("button",{className:"btn-refresh",onClick:L,children:"\uD83D\uDD04 Refresh"})]}),(0,i.jsxs)("div",{className:"approval-stats",children:[(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"\uD83D\uDCCA"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:U.length}),(0,i.jsx)("p",{children:"Total Entries"})]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"\uD83D\uDCCB"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:a.filter(e=>"pending_submission"===e.submissionStatus).length}),(0,i.jsx)("p",{children:"Pending"})]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"⚙️"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:a.filter(e=>"processing"===e.submissionStatus).length}),(0,i.jsx)("p",{children:"Processing"})]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"✅"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:a.filter(e=>"submitted"===e.submissionStatus).length}),(0,i.jsx)("p",{children:"Submitted"})]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"\uD83C\uDD95"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:a.filter(e=>"not_started"===O(e)).length}),(0,i.jsx)("p",{children:"Not Started"})]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"⏰"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:a.filter(e=>"expired"===O(e)).length}),(0,i.jsx)("p",{children:"Expired"})]})]}),(0,i.jsxs)("div",{className:"stat-card",children:[(0,i.jsx)("div",{className:"stat-icon",children:"\uD83D\uDEA8"}),(0,i.jsxs)("div",{className:"stat-content",children:[(0,i.jsx)("h3",{children:a.filter(e=>"urgent"===O(e)).length}),(0,i.jsx)("p",{children:"Urgent"})]})]})]}),(0,i.jsx)("div",{className:"submission-table-container",children:0===U.length?(0,i.jsxs)("div",{className:"no-entries",children:[(0,i.jsx)("div",{className:"no-entries-icon",children:"\uD83D\uDCED"}),(0,i.jsx)("h3",{children:"No Submission Entries Found"}),(0,i.jsx)("p",{children:0===a.length?"No entries have been submitted for processing yet. Approved entries from the Approval section will appear here.":"No entries match your current filter criteria."}),0===a.length&&(0,i.jsx)("p",{className:"help-text",children:"Entries will appear here once they are submitted from the Approval Dashboard."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"submission-table-header",children:[(0,i.jsx)("div",{className:"submission-header-cell",children:"QMS ID"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Sourcer"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Due Date"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Due Status"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Priority"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Days Left"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Vendor Info"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Status"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Total Value"}),(0,i.jsx)("div",{className:"submission-header-cell",children:"Actions"})]}),U.map(e=>{var s,a,n,t,l,c,r,o,d;let m=(e=>{var s;return(null==(s=e.sourcingData)?void 0:s.vendors)?e.sourcingData.vendors.find(e=>e.isPrimary)||e.sourcingData.vendors[0]:null})(e),u=m?(e=>(null==e?void 0:e.pricing)&&(e.pricing.finalGrandTotal||e.pricing.grandTotal)||0)(m):0,h=new Date(e.dueDate),p=Math.ceil((h-new Date)/864e5),v=p<0?{label:"Overdue",class:"due-overdue"}:0===p?{label:"Due Today",class:"due-today"}:p<=3?{label:"Due Soon",class:"due-soon"}:{label:"On Time",class:"due-ontime"},x=p<0?{label:"Expired",class:"priority-expired",icon:"\uD83D\uDD34"}:p<=2?{label:"Urgent",class:"priority-urgent",icon:"\uD83D\uDFE0"}:p<=4?{label:"Medium",class:"priority-medium",icon:"\uD83D\uDFE1"}:{label:"Normal",class:"priority-normal",icon:"\uD83D\uDFE2"};return(0,i.jsxs)("div",{className:"submission-table-row",children:[(0,i.jsx)("div",{className:"submission-cell qms-id-cell",children:(0,i.jsx)("div",{className:"qms-id",children:e.id})}),(0,i.jsx)("div",{className:"submission-cell sourcer-cell",children:(0,i.jsxs)("div",{className:"sourcer-name",children:["\uD83D\uDC64 ",e.sourcerName||e.hunterName||"Not Assigned"]})}),(0,i.jsx)("div",{className:"submission-cell due-date-cell",children:(0,i.jsxs)("div",{className:"due-date",children:["\uD83D\uDCC5 ",e.dueDate||"N/A"]})}),(0,i.jsx)("div",{className:"submission-cell due-status-cell",children:(0,i.jsx)("span",{className:"due-status-badge ".concat(v.class),children:v.label})}),(0,i.jsx)("div",{className:"submission-cell priority-cell",children:(0,i.jsxs)("span",{className:"priority-badge ".concat(x.class),children:[x.icon," ",x.label]})}),(0,i.jsx)("div",{className:"submission-cell days-left-cell",children:(0,i.jsx)("div",{className:"days-left ".concat(p<0?"negative":p<=2?"warning":"normal"),children:(()=>{if(p<0){let e=Math.abs(p);return"".concat(e," ").concat(1===e?"day":"days"," overdue")}return 0===p?"Due today":"".concat(p," ").concat(1===p?"day":"days"," left")})()})}),(0,i.jsx)("div",{className:"submission-cell vendor-info",children:m?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"vendor-name",children:(null==(s=m.sourcingInfo)?void 0:s.vendorName)||"Unknown"}),(0,i.jsxs)("div",{className:"vendor-details",children:[(0,i.jsxs)("div",{className:"vendor-website",children:["\uD83C\uDF10 ",(null==(a=m.sourcingInfo)?void 0:a.vendorWebsite)||"N/A"]}),(0,i.jsxs)("div",{className:"vendor-items",children:["\uD83D\uDCE6 ",(null==(t=e.sourcingData)||null==(n=t.vendors)?void 0:n.length)||0," vendor(s)"]}),(0,i.jsxs)("div",{className:"vendor-attachments",children:["\uD83D\uDCCE ",(null==(c=m.sourcingInfo)||null==(l=c.attachments)?void 0:l.length)||0," files"]})]})]}):(0,i.jsx)("div",{className:"no-vendor",children:"No Vendor Data"})}),(0,i.jsx)("div",{className:"submission-cell status-info",children:(e=>{let s={pending_submission:{label:"Pending",class:"status-pending",icon:"\uD83D\uDCCB"},processing:{label:"Processing",class:"status-processing",icon:"⚙️"},submitted:{label:"Submitted",class:"status-approved",icon:"✅"}},a=s[e]||s.pending_submission;return(0,i.jsxs)("span",{className:"status-badge ".concat(a.class),children:[a.icon," ",a.label]})})(e.submissionStatus)}),(0,i.jsxs)("div",{className:"submission-cell value-info",children:[(0,i.jsxs)("div",{className:"total-value",children:["$",u.toFixed(2)]}),(0,i.jsxs)("div",{className:"value-breakdown",children:[(0,i.jsxs)("div",{children:["Subtotal: $",((null==m||null==(r=m.pricing)?void 0:r.subtotal)||0).toFixed(2)]}),(0,i.jsxs)("div",{children:["Tax: $",((null==m||null==(o=m.pricing)?void 0:o.taxAmount)||0).toFixed(2)]}),(0,i.jsxs)("div",{children:["Final: $",((null==m||null==(d=m.pricing)?void 0:d.finalGrandTotal)||u).toFixed(2)]})]})]}),(0,i.jsx)("div",{className:"submission-cell actions",children:"submitted"===e.submissionStatus?(0,i.jsxs)("div",{className:"submitted-actions",children:[(0,i.jsx)("button",{className:"btn-review btn-submitted",onClick:()=>Q(e.id),title:"View Submission",children:"\uD83D\uDCCB Submitted"}),(0,i.jsx)("button",{className:"btn-delete",onClick:()=>z(e.id),title:"Delete Entry",children:"\uD83D\uDDD1️"})]}):"processing"===e.submissionStatus?(0,i.jsx)("button",{className:"btn-review btn-processing",onClick:()=>Q(e.id),title:"Continue Processing",children:"⚙️ Processing"}):e.isStarted?(0,i.jsx)("button",{className:"btn-review btn-started",onClick:()=>Q(e.id),title:"Continue Review",children:"\uD83D\uDCDD Started"}):(0,i.jsx)("button",{className:"btn-review",onClick:()=>Q(e.id),title:"Start Review",children:"\uD83D\uDE80 Start"})})]},e.id)})]})}),(0,i.jsxs)("div",{className:"approval-navigation",children:[(0,i.jsx)("button",{className:"btn-secondary",onClick:()=>e.push("/approval"),children:"← Back to Approval"}),(0,i.jsx)("button",{className:"btn-primary",onClick:()=>e.push("/execution"),children:"Proceed to Execution →"})]})]})}}},e=>{e.O(0,[406,441,964,358],()=>e(e.s=453)),_N_E=e.O()}]);